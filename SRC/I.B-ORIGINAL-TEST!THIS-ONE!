## BASLOAD ISO CRLF 
## ------------------------------------------------------
#CONTROLCODES 1
#SYMFILE "@:I.SYM"
## ------------------------------------------------------


## TEMP VARS USED IN MANY PLACES
DIM TMP$(5) : DIM TMP(5)

DIM OLD.ENV(3) : REM -- ENV-SAVE-LOAD.BL

START:
	GOSUB SAVE.ENV
	GOSUB SOUND.INIT

	COLOR 1,4 : SCREEN 3 : CLS
	
	DIM MENU.TEXT$(10) 		: REM JUST THE TEST 
	DIM MENU.TYPE(10) 		: REM 1 = ALSO LEFT/RIGHT, 0 = NOPE
	DIM MENU.ATTR(6) 		: REM 1=X,2=Y,3=FG COLOR,4- BG COLOR, 5=MENU BAR LEN,6 = MENU ITEMS
	GOSUB MENU.CLEAR.VARS
		
	MENU.TEXT$(1) = "     TEST MENU 1     " 
	MENU.TEXT$(2) = "<  ANOTHER MENU 2   >" 	: MENU.TYPE(2) = 1
	MENU.TEXT$(3) = "< TEST AGAIN MENU 3 >" 	: MENU.TYPE(3) = 1
	MENU.TEXT$(4) = "<    MENU NUM 4     >" 	: MENU.TYPE(4) = 1
	MENU.TEXT$(5) = "       EXIT!         " 
		
	MENU.ATTR(1) = 10					: REM X LOCATION
	MENU.ATTR(2) = 14					: REM Y LOCATION
	MENU.ATTR(3) = 2   					: REM RED 
	MENU.ATTR(4) = 0    				: REM BLACK
	MENU.ATTR(5) = LEN(MENU.TEXT$(1)) 	: REM MAX BAR LEN
	MENU.ATTR(6) = 5					: REM TTL MENU ITEMS
	
	MENU.SCROLL.ACTIVE = 0
	
	GOSUB MENU.CLEAR.SCRN
	MENU.NDX = 1
	GOSUB START.MENU1
	GOTO CLOSE.APP : REM -- THIS WILL END IT ALL
	
	
START.MENU1:	
	GOSUB MENU.GO
	IF MENU.SELECTED > 0 THEN RETURN : REM -- MENU SELECTED 
	IF MENU.SCROLL.ACTIVE > 0 THEN LOCATE 1,1 : PRINT "SIDE MENU"
	REM IF MENU.TYPE(MENU.ATTR(5)) = 1 THEN
	GOTO START.MENU1
	
	




## ------------------------------------------------------

MENU.GO: 
	MENU.SCROLL.ACTIVE = 0	
	MENU.SELECTED = 0
	COLOR MENU.ATTR(3), MENU.ATTR(4)
MENU.LOOP1:
	FOR X = 1 TO MENU.ATTR(6)
		LOCATE X + MENU.ATTR(2)-1,MENU.ATTR(1)
		IF MENU.NDX <> X THEN PRINT MENU.TEXT$(X)
		IF MENU.NDX = X THEN PRINT CHR$(18) MENU.TEXT$(X) CHR$(146)
	NEXT
MENU.GET.KEYS:
	SLEEP(10)
	VJ=JOY(0)
	GET TMP$ : TMP = ASC(TMP$)
	IF VJ AND 4 THEN MENU.NDX = MENU.NDX + 1 : GOTO MENU.PROCESS.KEY.UD
	IF VJ AND 8 THEN MENU.NDX = MENU.NDX - 1 : GOTO MENU.PROCESS.KEY.UD
	IF (VJ AND 2) AND MENU.TYPE(MENU.NDX) = 1 THEN MENU.SCROLL.ACTIVE = 1 : RETURN
	IF (VJ AND 1) AND MENU.TYPE(MENU.NDX) = 1 THEN MENU.SCROLL.ACTIVE = 2 : RETURN
	IF VJ AND 16 THEN MENU.SELECTED = 1 : RETURN 
	GOTO MENU.GET.KEYS
	
MENU.PROCESS.KEY.UD:
	IF MENU.NDX = 0 THEN MENU.NDX = MENU.ATTR(6) 
	IF MENU.NDX = MENU.ATTR(6)+1 THEN MENU.NDX = 1 
	GOTO MENU.LOOP1
		

MENU.CLEAR.VARS:
	FOR X = 1 TO 10 
		MENU.TEXT$(X) = "" 
		MENU.TYPE(X)  = 0 
	NEXT
	FOR X = 1 TO 5  : MENU.ATTR(X) = 0 : NEXT
	RETURN


MENU.CLEAR.SCRN:
	COLOR MENU.ATTR(3),MENU.ATTR(4)
	REM COLOR MENU.ATTR(3)
	FOR X = 1 TO MENU.ATTR(6)
		LOCATE X + MENU.ATTR(2) - 1,MENU.ATTR(1)
		PRINT RPT$(ASC(" "),MENU.ATTR(5))
	NEXT
	RETURN






#INCLUDE "ENV-SAVE-LOAD.BL" 
REM #INCLUDE "BASIC-EXT-CODE.BL"
#INCLUDE "SOUNDS.BL"

